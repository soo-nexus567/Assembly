     1                                  ;Copyright Info
     2                                  ;  "Assignment 1" is free software: you can redistribute it and/or modify
     3                                  ;  it under the terms of the GNU General Public License as published by
     4                                  ;  the Free Software Foundation, either version 3 of the License, or
     5                                  ;  (at your option) any later version.
     6                                  
     7                                  ;  "Assignment 1" is distributed in the hope that it will be useful,
     8                                  ;  but WITHOUT ANY WARRANTY; without even the implied warranty of
     9                                  ;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    10                                  ;  GNU General Public License for more details.
    11                                  
    12                                  ;  You should have received a copy of the GNU General Public License
    13                                  ;  along with this program.  If not, see <https://www.gnu.org/licenses/>.
    14                                  ;Author information
    15                                  ;  Author name: Jonathan Soo
    16                                  ;  Author email: jonathansoo07@csu.fullerton.edu
    17                                  ;  Author section: 240-11
    18                                  ;  Author CWID : 884776980
    19                                  ;Purpose
    20                                  ;  Calculate the third side of a triangle using float-point arthmetic
    21                                  ;  Get input from user and ouput using C functions
    22                                  ;Program information
    23                                  ;  Program name: Assignment 1
    24                                  ;  Copyright (C) <2025> <Jonathan Soo>
    25                                  ;  Programming languages: One modules in C and one module in X86
    26                                  ;  Date program began:     2025-Mar-05
    27                                  ;  Date program completed: 2025-Feb-07
    28                                  ;  Date comments upgraded: 2025-Feb-08
    29                                  ;  Files in this program: geometry.c, triangle.asm, r.sh
    30                                  ;  Status: Complete.  No errors found after extensive testing.
    31                                  ;
    32                                  ;This file
    33                                  ;   File name: triangle.asm
    34                                  ;   Language: X86-64 with Linux Syntax
    35                                  ;   Assemble: nasm -f elf64 triangle.asm -o triangle.o
    36                                  ;   Editor: VS Code
    37                                  ;   Link: gcc -m64 -Wall -fno-pie -no-pie -z noexecstack -o learn.out triangle.o geometry.o -lm 
    38                                  
    39                                  global manger
    40                                      extern printf
    41                                  segment .data
    42 00000000 546865736520736964-         invalid_triangle_msg db "These sides do not form a valid triangle.", 10, 0
    42 00000009 657320646F206E6F74-
    42 00000012 20666F726D20612076-
    42 0000001B 616C69642074726961-
    42 00000024 6E676C652E0A00     
    43 0000002B 546865207369646573-         valid_triangle_msg db "The sides form a valid triangle.", 10, 0
    43 00000034 20666F726D20612076-
    43 0000003D 616C69642074726961-
    43 00000046 6E676C652E0A00     
    44                                  segment .bss
    45                                      ; Temporary input buffer
    46                                  segment .text
    47                                      global istriangle
    48                                  istriangle:
    49                                      ; Save the base pointer
    50 00000000 55                          push    rbp
    51 00000001 4889E5                      mov     rbp, rsp
    52                                  
    53                                      ; Save the general purpose registers
    54 00000004 53                          push    rbx
    55 00000005 51                          push    rcx
    56 00000006 52                          push    rdx
    57 00000007 56                          push    rsi
    58 00000008 57                          push    rdi
    59 00000009 4150                        push    r8 
    60 0000000B 4151                        push    r9 
    61 0000000D 4152                        push    r10
    62 0000000F 4153                        push    r11
    63 00000011 4154                        push    r12
    64 00000013 4155                        push    r13
    65 00000015 4156                        push    r14
    66 00000017 4157                        push    r15
    67 00000019 9C                          pushf
    68                                          ; Check if any side is non-positive
    69 0000001A F20F1007                    movsd xmm0, [rdi]           ; Load side 1 into xmm0
    70 0000001E F20F100E                    movsd xmm1, [rsi]           ; Load side 2 into xmm1
    71 00000022 F20F1012                    movsd xmm2, [rdx]           ; Load side 3 into xmm2
    72                                  
    73                                      ; Check if any side <= 0
    74 00000026 660F2FC3                    comisd xmm0, xmm3         ; Compare side 1 with 0
    75 0000002A 764E                        jbe invalid_triangle
    76                                  
    77 0000002C 660F2FCB                    comisd xmm1, xmm3         ; Compare side 2 with 0
    78 00000030 7648                        jbe invalid_triangle
    79                                  
    80 00000032 660F2FD3                    comisd xmm2, xmm3         ; Compare side 3 with 0
    81 00000036 7642                        jbe invalid_triangle
    82                                  
    83                                      ; Check triangle inequality: side1 + side2 > side3
    84 00000038 F20F1007                    movsd xmm0, [rdi]           ; side1
    85 0000003C F20F58C1                    addsd xmm0, xmm1          ; side1 + side2
    86 00000040 660F2FC2                    comisd xmm0, xmm2         ; Compare (side1 + side2) with side3
    87 00000044 7634                        jbe invalid_triangle
    88                                  
    89                                      ; Check: side1 + side3 > side2
    90 00000046 F20F1007                    movsd xmm0, [rdi]           ; side1
    91 0000004A F20F58C2                    addsd xmm0, xmm2          ; side1 + side3
    92 0000004E 660F2FC1                    comisd xmm0, xmm1         ; Compare (side1 + side3) with side2
    93 00000052 7626                        jbe invalid_triangle
    94                                  
    95                                      ; Check: side2 + side3 > side1
    96 00000054 F20F1006                    movsd xmm0, [rsi]           ; side2
    97 00000058 F20F58C2                    addsd xmm0, xmm2          ; side2 + side3
    98 0000005C 660F2FC1                    comisd xmm0, xmm1         ; Compare (side2 + side3) with side1
    99 00000060 7618                        jbe invalid_triangle
   100 00000062 9D                          popf          
   101 00000063 415F                        pop     r15
   102 00000065 415E                        pop     r14
   103 00000067 415D                        pop     r13
   104 00000069 415C                        pop     r12
   105 0000006B 415B                        pop     r11
   106 0000006D 415A                        pop     r10
   107 0000006F 4159                        pop     r9 
   108 00000071 4158                        pop     r8 
   109 00000073 5F                          pop     rdi
   110 00000074 5E                          pop     rsi
   111 00000075 5A                          pop     rdx
   112 00000076 59                          pop     rcx
   113 00000077 5B                          pop     rbx
   114                                  
   115                                      ; Restore the base pointer
   116 00000078 5D                          pop     rbp
   117 00000079 C3                          ret
   118                                  invalid_triangle:
   119 0000007A B801000000                  mov rax, 1
   120 0000007F 9D                          popf          
   121 00000080 415F                        pop     r15
   122 00000082 415E                        pop     r14
   123 00000084 415D                        pop     r13
   124 00000086 415C                        pop     r12
   125 00000088 415B                        pop     r11
   126 0000008A 415A                        pop     r10
   127 0000008C 4159                        pop     r9 
   128 0000008E 4158                        pop     r8 
   129 00000090 5F                          pop     rdi
   130 00000091 5E                          pop     rsi
   131 00000092 5A                          pop     rdx
   132 00000093 59                          pop     rcx
   133 00000094 5B                          pop     rbx
   134                                  
   135                                      ; Restore the base pointer
   136 00000095 5D                          pop     rbp
   137 00000096 C3                          ret
